<h2>🐕 🐕 🐕 🐶 🐶 🐶</h2>
<small><a href="/create">Click here to generate 5 random entries</a></small>
<form method=POST action="" class="new">
  <table class="ui single line table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Owner First Name</th>
        <th>Owner Last Name</th>
      </tr>
    </thead>
    
    <tbody>
      {{#each dogs}}
      <tr>
        <td>{{name}}</td>
        <td>{{age}}</td>
        <td>{{ownerFirstName}}</td>
        <td>{{ownerLastName}}</td>
      </tr>
      {{/each}}
    </tbody>

    <tfoot>
      <tr><td colspan=4> 
        <div class="ui form">
          <h4>New Dog</h4>
          <div class="four fields">
            <div class="field"><label>Name</label> <input type="text" id="name"></div>
            <div class="field"><label>Age</label> <input type="number" id="age"></div>
            <div class="field"><label>Owner First Name</label> <input type="text" id="ownerFirstName"></div>
            <div class="field"><label>Owner Last Name</label> <input type="text" id="ownerLastName"></div>
          </div>
          <button class="ui primary button">Save</button>
        </div>
      </td></tr>
    </tfoot>
  </table>
</form>

<script>
document.querySelector('.new').addEventListener('submit', function(e) {
  e.preventDefault();

  var name = document.querySelector('#name').value;
  var age = document.querySelector('#age').value;
  var ownerFirstName = document.querySelector('#ownerFirstName').value;
  var ownerLastName = document.querySelector('#ownerLastName').value;

  if (name && age && ownerFirstName && ownerLastName) {
    var dog = {
      name: name,
      age: age,
      ownerFirstName: ownerFirstName,
      ownerLastName: ownerLastName
    }
    fetch('/doggos', {
      method: 'POST',
      headers: new Headers({ 'Content-Type': 'application/json' }),
      body: JSON.stringify(dog)
    }).then(function() { location.reload(); })
      .catch(function(err) { console.error(err); });
  } else {
    alert('Invalid data');
  }
});
</script>
